# Safty-Helmet
This Arduino C++ code establishes an IoT-based system on an ESP32 to enhance vehicle safety

ðŸš¦ ESP32 Vehicle Accident & SOS ReporterDescriptionThis project implements an intelligent system to automatically detect vehicle accidents and report the location to a predefined emergency contact via SMS, while also providing a manual S.O.S function.It utilizes an ESP32 for processing, a GPS module to acquire the vehicle's coordinates, and a GSM module (SIMA7670 is specified in the comments, but the logic applies to most AT-command compatible GSM modules) to send the alert message.Key FeaturesAutomatic Accident Detection: An analog sensor (likely an accelerometer on accPin - GPIO 15) is constantly monitored. A sudden, large change in the analog reading (thresholded at analogValue > 202 and <= 800) is interpreted as a collision.8-Second Grace Period: Upon collision detection, the system waits for 8 seconds (millis() - collisionTime >= 8000). This window allows the user to press a Cancel Button to prevent sending the accident report if it was a false alarm (e.g., a hard bump).Manual SOS: The user can press and hold a button (BUTTON_PIN - GPIO 23) for 2 seconds to immediately trigger a manual SOS alert, which sends a different, more urgent message.GPS Integration: The TinyGPS++ library is used to parse NMEA sentences from the GPS module (using SerialGPS on hardware UART). The current latitude and longitude are included in all alert messages.GSM Communication: The system configures the GSM module (using gsmSerial on a separate hardware UART) by sending standard AT commands to set the baud rate, configure for text mode SMS, and ensure connection.SMS Alerts: Two distinct SMS messages are sent: one for an Accident Detected and one for SOS! Passenger is in Danger.Project Structure & ComponentsComponentESP32 Pin/ConnectionPurposeMicrocontrollerESP32 Dev BoardMain processing unit.Accelerometer (or similar)accPin (GPIO 15) - Analog InputDetects sudden impact/collision (accident).SOS/Cancel ButtonBUTTON_PIN (GPIO 23) - Input with PULLUPManual SOS trigger and automatic accident report cancellation.GPS ModuleSerialGPS (UART 1): RXPin (GPIO 18), TXPin (GPIO 5)Acquires geographic location (latitude, longitude).GSM Module (SIMA7670)gsmSerial (UART 2): Default RX2 (GPIO 16), TX2 (GPIO 17)Sends SMS alerts to the emergency number.Status LEDGPIO 2 - OutputToggled HIGH once GPS lock is achieved.Installation & Setup1. LibrariesThe following libraries must be installed in the Arduino IDE:TinyGPS++: For parsing NMEA data from the GPS module.2. Hardware ConnectionsConnectionESP32 PinGPS Module PinGSM Module PinAccelerometer OutGPIO 15--SOS/Cancel ButtonGPIO 23--GPS RXGPIO 18 (Connected to GPS TX)TX-GPS TXGPIO 5 (Connected to GPS RX)RX-GSM RXGPIO 16 (Connected to GSM TX)-TXGSM TXGPIO 17 (Connected to GSM RX)-RXNote: Ensure the ESP32 and modules share a common GND. The GPS and GSM modules must be powered correctly (often 5V for power, but check if they require 3.3V logic level shifting for communication with the ESP32).3. ConfigurationEmergency Number: Update the constant variable emergencyNumber with the phone number that should receive the alerts.C++const char* emergencyNumber = "+918170839799"; // REPLACE WITH YOUR EMERGENCY CONTACT
Accelerometer Threshold: The collision detection threshold is set in the loop() function. This value will depend heavily on the specific accelerometer used and its mounting in the vehicle. You may need to calibrate the 202 and 800 values.C++collition = (analogValue > 202 ? 1 : 0); // Primary threshold for detecting impact
Serial Ports: The code is configured to use UART 1 for GPS and UART 2 for the GSM module.System WorkflowAutomatic AccidentDetection: The accelerometer reading (analogRead(accPin)) exceeds the impact threshold (> 202).Timer Start: collisionTime is recorded, and the accidentReported flag is set to true.8-Second Wait: The system waits for 8 seconds.Cancel Option: If the user presses and holds the button during this time, the cancel flag is set, which prevents the SMS from being sent and resets the timer.SMS Sent: If the 8-second window elapses without cancellation, the sendsms() function is called.Message: "Accident Detected. Latitude: [lat], Longitude: [lng]"Reset: The accidentReported flag is set to false, and the system returns to monitoring.Manual SOSButton Press: The user presses and holds the button (BUTTON_PIN) for 2 seconds or more.Trigger: The cancel flag is set to true (this flag is overloaded, acting as a trigger here).SMS Sent: The system calls the sendsos() function.Message: "SOS! Passenger is in Danger. Latitude: [lat], Longitude: [lng]"Reset: The cancel and buttonPressed flags are set to false.
